<!-- success.component.html -->
<div class="success-page">
  <div class="container">
    <!-- Loading State -->
    <div class="success-card" *ngIf="isLoading">
      <div class="loading-animation">
        <div class="spinner-large"></div>
        <h2>Processing Payment...</h2>
        <p>Please wait for a moment</p>
      </div>
    </div>

    <!-- Success State -->
    <div class="success-card animate-in" *ngIf="!isLoading && paymentConfirmed">
      <div class="success-icon">
        <div class="checkmark-circle">
          <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <circle class="checkmark-circle-svg" cx="26" cy="26" r="25" fill="none" />
            <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
          </svg>
        </div>
      </div>

      <h1 class="success-title">Booking Confirmed! ðŸŽ‰</h1>
      <p class="success-message">
        Thank you! Your booking has been successfully created and we will contact you soon to
        confirm the details.
      </p>

      <div class="payment-details">
        <div class="detail-row">
          <span class="detail-label">Transaction ID:</span>
          <span class="detail-value">{{ sessionId.substring(0, 20) }}...</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Booking Date:</span>
          <span class="detail-value">{{ getCurrentDate() }}</span>
        </div>
        <div class="detail-row" *ngIf="bookingDetails?.startDate">
          <span class="detail-label">From:</span>
          <span class="detail-value">{{ bookingDetails.startDate }}</span>
        </div>
        <div class="detail-row" *ngIf="bookingDetails?.endDate">
          <span class="detail-label">To:</span>
          <span class="detail-value">{{ bookingDetails.endDate }}</span>
        </div>
        <div class="detail-row" *ngIf="bookingDetails?.totalPrice">
          <span class="detail-label">Total Amount:</span>
          <span class="detail-value">{{
            bookingDetails.totalPrice | currency : 'EGP' : 'symbol' : '1.0-0'
          }}</span>
        </div>
        <div class="detail-row" *ngIf="bookingDetails?.propertyTitle">
          <span class="detail-label">Property:</span>
          <span class="detail-value">{{ bookingDetails.propertyTitle }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Status:</span>
          <span class="detail-value success-status">
            <i class="bi bi-check-circle-fill"></i>
            Completed
          </span>
        </div>
      </div>

      <div class="success-actions">
        <button class="btn-primary" (click)="goToHome()">
          <i class="bi bi-house-door"></i>
          Back to Home
        </button>
        <button class="btn-secondary" (click)="goToProperties()">
          <i class="bi bi-search"></i>
          Browse More Properties
        </button>
        <button class="btn-outline" (click)="viewReceipt()">
          <i class="bi bi-receipt"></i>
          View Receipt
        </button>
      </div>

      <div class="success-features">
        <div class="feature-item">
          <div class="feature-icon">
            <i class="bi bi-shield-check"></i>
          </div>
          <h4>Secure Payment</h4>
          <p>Your information is encrypted with the highest security standards</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <i class="bi bi-envelope-check"></i>
          </div>
          <h4>Confirmation Email</h4>
          <p>A confirmation email will be sent to your inbox</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">
            <i class="bi bi-headset"></i>
          </div>
          <h4>24/7 Support</h4>
          <p>Our team is available to help you anytime</p>
        </div>
      </div>

      <div class="support-info">
        <p>
          <i class="bi bi-info-circle"></i>
          If you have any questions, please contact us at
          <a href="mailto:support@realestate.com">support@realestate.com</a>
          or call <strong>+1-234-567-8900</strong>
        </p>
      </div>
    </div>

    <!-- Error State -->
    <div class="success-card error-card" *ngIf="!isLoading && !paymentConfirmed">
      <div class="error-icon">
        <i class="bi bi-x-circle"></i>
      </div>
      <h1 class="error-title">Payment Verification Failed</h1>
      <p class="error-message">
        Sorry, we couldn't verify your payment. There may be a delay in processing or a technical
        error occurred.
      </p>

      <div class="error-suggestions">
        <h3>What can you do?</h3>
        <ul>
          <li><i class="bi bi-arrow-left"></i> Wait a few minutes and refresh the page</li>
          <li><i class="bi bi-arrow-left"></i> Check your email for confirmation</li>
          <li>
            <i class="bi bi-arrow-left"></i> Contact us if the amount has been deducted from your
            account
          </li>
        </ul>
      </div>

      <div class="error-actions">
        <button class="btn-primary" (click)="goToHome()">
          <i class="bi bi-house-door"></i>
          Back to Home
        </button>
        <button class="btn-outline" (click)="goToProperties()">
          <i class="bi bi-arrow-clockwise"></i>
          Try Again
        </button>
      </div>

      <div class="support-info error-support">
        <p>
          <i class="bi bi-telephone-fill"></i>
          For immediate assistance: <a href="tel:+1-234-567-8900">+1-234-567-8900</a>
        </p>
      </div>
    </div>
  </div>
</div>
