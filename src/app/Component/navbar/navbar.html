<header class="pf-header">
  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom fixed-top pf-navbar">
    <div class="container-fluid px-3 px-lg-4">

      <!-- Logo on the left -->
      <div class="d-flex align-items-center">
        <!-- Logo -->
        <a class="navbar-brand d-flex align-items-center gap-2" (click)="goToHome()" style="cursor: pointer;">
          <span class="fw-bold fs-5 pf-brand-text">TraffiEstate</span>
        </a>

        <!-- Mobile Toggle Button -->
        <button class="navbar-toggler d-lg-none ms-auto border-0" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false"
                aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>

      <!-- Center Navigation -->
      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav mx-auto align-items-center gap-3 gap-lg-4 pf-nav-links">

          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded"
               (click)="goToHome()"
               style="cursor: pointer;"
               routerLinkActive="active">
              {{ 'header.home' | translate }}
            </a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link px-3 py-2 rounded dropdown-toggle"
               (click)="togglePropertiesMenu()"
               style="cursor: pointer;">
              {{ 'header.properties' | translate }}
              <i class="fas fa-chevron-down ms-1"></i>
            </a>
            <div *ngIf="isPropertiesMenuOpen" class="properties-dropdown-menu">
              <a routerLink="/buy" class="dropdown-item" (click)="togglePropertiesMenu()">
                <i class="fas fa-shopping-cart me-2"></i>
                <span>{{ 'header.buy' | translate }}</span>
              </a>
              <a routerLink="/rent" class="dropdown-item" (click)="togglePropertiesMenu()">
                <i class="fas fa-home me-2"></i>
                <span>{{ 'header.rent' | translate }}</span>
              </a>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded"
               routerLink="/land"
               routerLinkActive="active">
              {{ 'header.land' | translate }}
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded"
               routerLink="/about"
               routerLinkActive="active">
              {{ 'header.about' | translate }}
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded"
               routerLink="/contact-us"
               routerLinkActive="active">
              {{ 'header.contact' | translate }}
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded"
               routerLink="/inquiries"
               routerLinkActive="active">
              ğŸ’¬ Inquiries with Farida
            </a>
          </li>
        </ul>
      </div>

      <!-- Right Actions -->
      <div class="pf-actions d-flex align-items-center gap-2 gap-lg-3 ms-auto">
        <!-- Language Toggle Button -->
        <button class="btn btn-sm btn-outline-secondary rounded-pill px-3 py-2"
                (click)="toggleLanguage()"
                type="button">
          <i class="fas fa-globe me-2"></i>
          <span>{{ currentLang === 'ar' ? 'EN' : 'AR' }}</span>
        </button>

        <!-- User Avatar / Login -->
        <div class="pf-user-dropdown">
          <!-- Logged In User Profile Button -->
          <button *ngIf="isLoggedIn"
                  class="pf-user-name-btn"
                  type="button"
                  (click)="toggleProfileMenu()">
            <i class="fas fa-user-circle"></i>
            <span class="pf-user-name-text">{{ userName }}</span>
            <i class="fas fa-chevron-down"></i>
          </button>

          <!-- Profile Dropdown Menu -->
          <div *ngIf="isLoggedIn && isProfileMenuOpen" class="profile-dropdown-menu">
            <a routerLink="/profile" class="dropdown-item" (click)="toggleProfileMenu()">
              <i class="fas fa-user"></i>
              <span>{{ 'header.profile' | translate }}</span>
            </a>
            <a *ngIf="isOwner()" routerLink="/ownerDashboard" class="dropdown-item" (click)="toggleProfileMenu()">
              <i class="fas fa-chart-line"></i>
              <span>{{ 'header.dashboard' | translate }}</span>
            </a>
            <a routerLink="/favorites" class="dropdown-item" (click)="toggleProfileMenu()">
              <i class="fas fa-heart"></i>
              <span>{{ 'header.favorites' | translate }}</span>
            </a>
            <div class="dropdown-divider"></div>
            <button (click)="logout()" class="dropdown-item logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              <span>{{ 'header.logout' | translate }}</span>
            </button>
          </div>

          <!-- Not Logged In - Login Button -->
          <a *ngIf="!isLoggedIn"
             class="btn btn-success pf-login-btn rounded-pill px-4 py-2"
             routerLink="/login">
            <span>{{ 'header.sign_in' | translate }}</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
