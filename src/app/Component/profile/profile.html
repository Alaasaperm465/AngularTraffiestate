<!-- Profile Page -->
<div class="profile-page">

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>{{ 'dashboard.profile.loading_profile' | translate }}</p>
  </div>

  <!-- Profile Content -->
  <div *ngIf="!loading && user" class="profile-container">

    <!-- Header Section -->
    <div class="profile-header-section">
      <div class="header-content">
        <div class="avatar-container">
          
          <div class="avatar-info">
            <h1>{{ user.userName }}</h1>
            <p class="role-badge">{{ user.role || 'User' }}</p>
          </div>
        </div>
        <button (click)="goToEditProfile()" class="btn-edit-primary">
          <i class="fas fa-edit"></i> {{ 'dashboard.profile.edit_profile' | translate }}
        </button>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-building"></i>
        </div>
        <div class="stat-content">
          <h3>{{ user.propertiesCount }}</h3>
          <p>{{ 'dashboard.profile.properties' | translate }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-heart"></i>
        </div>
        <div class="stat-content">
          <h3>{{ user.favoritesCount }}</h3>
          <p>{{ 'dashboard.profile.favorites' | translate }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="stat-content">
          <h3>{{ user.averageRating.toFixed(1) }}</h3>
          <p>{{ 'dashboard.profile.average_rating' | translate }}</p>
        </div>
      </div>
    </div>

    <!-- Profile Details Section -->
    <div class="details-section">
      <h2>{{ 'dashboard.profile.profile_information' | translate }}</h2>

      <div class="details-grid">
        <!-- Email -->
        <div class="detail-item">
          <label>
            <i class="fas fa-envelope"></i>
            {{ 'dashboard.contact_info.email' | translate }}
          </label>
          <p class="detail-value">{{ user.email }}</p>
        </div>

        <!-- Phone -->
        <div class="detail-item">
          <label>
            <i class="fas fa-phone"></i>
            {{ 'dashboard.profile.phone_number' | translate }}
          </label>
          <p class="detail-value">{{ user.phoneNumber || ('dashboard.profile.not_provided' | translate) }}</p>
        </div>

        <!-- Role -->
        <div class="detail-item">
          <label>
            <i class="fas fa-user-tag"></i>
            {{ 'dashboard.contact_info.role' | translate }}
          </label>
          <p class="detail-value">{{ user.role || 'User' }}</p>
        </div>

        <!-- Bio Section -->
        <div *ngIf="user.bio" class="bio-section">
          <h3>{{ 'dashboard.profile.bio' | translate }}</h3>
          <p>{{ user.bio }}</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Error State -->
  <div *ngIf="!loading && !user && error" class="error-container">
    <div class="error-card">
      <i class="fas fa-exclamation-circle"></i>
      <h2>{{ 'dashboard.profile.unable_to_load' | translate }}</h2>
      <p>{{ error }}</p>
      <button (click)="loadProfile()" class="btn-retry">
        <i class="fas fa-redo"></i> {{ 'dashboard.profile.try_again' | translate }}
      </button>
    </div>
  </div>

</div>
