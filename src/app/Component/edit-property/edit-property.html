<div class="edit-property-wrapper">

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-overlay"></div>
    <div class="container">
      <div class="hero-content">
        <h1>{{ 'editProperty.hero.title' | translate }}</h1>
        <p>{{ 'editProperty.hero.subtitle' | translate }}</p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="main-section">
    <div class="container">
      <div class="edit-property-container">

        <!-- Loading State -->
        <div *ngIf="isLoading" class="loading-overlay">
          <div class="spinner"></div>
          <p>{{ 'editProperty.loading' | translate }}</p>
        </div>

        <!-- Step Indicator -->
        <div class="steps-indicator" *ngIf="!isLoading">
          <div class="steps-wrapper">
            <div *ngFor="let step of [1, 2, 3, 4]"
              class="step-item"
              [class.active]="isStepActive(step)"
              [class.completed]="isStepCompleted(step)"
              (click)="goToStep(step)">
              <div class="step-circle">
                <span *ngIf="!isStepCompleted(step)">{{ step }}</span>
                <i *ngIf="isStepCompleted(step)" class="bi bi-check"></i>
              </div>
              <span class="step-label">{{ getStepTitle(step) | translate }}</span>
            </div>
          </div>
        </div>

        <!-- Form -->
        <form class="form-wrapper" [ngSwitch]="currentStep" *ngIf="!isLoading">

          <!-- Step 1 -->
          <div *ngSwitchCase="1" class="form-step">
            <div class="step-header">
              <h2>{{ getStepTitle(1) | translate }}</h2>
              <p>{{ getStepDescription(1) | translate }}</p>
            </div>

            <div class="form-group">
              <label>
                {{ 'editProperty.fields.title' | translate }}
                <span class="required">*</span>
              </label>
              <input type="text"
                     [(ngModel)]="property.title"
                     name="title"
                     [placeholder]="'editProperty.placeholders.title' | translate"
                     [class.error]="showValidationErrors && property.title.trim() === ''">
              <small *ngIf="showValidationErrors && property.title.trim() === ''">
                {{ 'editProperty.validation.required' | translate }}
              </small>
            </div>

            <div class="form-group">
              <label>
                {{ 'editProperty.fields.description' | translate }}
                <span class="required">*</span>
              </label>
              <textarea rows="5"
                        [(ngModel)]="property.description"
                        name="description"
                        [placeholder]="'editProperty.placeholders.description' | translate"
                        [class.error]="showValidationErrors && property.description.trim() === ''">
              </textarea>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" disabled>
                ← {{ 'common.previous' | translate }}
              </button>
              <button type="button" class="btn-primary" (click)="nextStep()">
                {{ 'common.next' | translate }} →
              </button>
            </div>
          </div>

          <!-- Step 2 -->
          <div *ngSwitchCase="2" class="form-step">
            <div class="step-header">
              <h2>{{ getStepTitle(2) | translate }}</h2>
              <p>{{ getStepDescription(2) | translate }}</p>
            </div>

            <div class="form-group">
              <label>{{ 'editProperty.fields.city' | translate }}</label>
              <select [(ngModel)]="property.cityId" name="cityId">
                <option value="0">{{ 'common.select' | translate }}</option>
                <option *ngFor="let city of cities" [value]="city.id">
                  {{ city.name }}
                </option>
              </select>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" (click)="previousStep()">
                ← {{ 'common.previous' | translate }}
              </button>
              <button type="button" class="btn-primary" (click)="nextStep()">
                {{ 'common.next' | translate }} →
              </button>
            </div>
          </div>

          <!-- Step 4 -->
          <div *ngSwitchCase="4" class="form-step">
            <div class="step-header">
              <h2>{{ getStepTitle(4) | translate }}</h2>
              <p>{{ getStepDescription(4) | translate }}</p>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" (click)="previousStep()">
                ← {{ 'common.previous' | translate }}
              </button>
              <button type="submit"
                      class="btn-success"
                      (click)="submit()"
                      [disabled]="isSubmitting">
                {{ isSubmitting
                    ? ('editProperty.updating' | translate)
                    : ('editProperty.update' | translate) }}
              </button>
            </div>
          </div>

        </form>

      </div>
    </div>
  </section>

</div>
