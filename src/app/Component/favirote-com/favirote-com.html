<div class="favorites-container">
  <!-- Enhanced Header -->
  <div class="favorites-header">
    <div class="header-content">
      <div class="header-title-section">
        <h1 class="favorites-title">
          <i class="fas fa-heart"></i>
          My Favorites
        </h1>
        <p class="favorites-subtitle">Your saved properties collection</p>
      </div>
      <div class="favorites-count-badge">
        <span class="count-number">{{ favorites.length }}</span>
        <span class="count-label">Properties</span>
      </div>
    </div>

    <!-- Enhanced Tabs -->
    <div class="favorites-tabs">
      <div class="tab active">
        <i class="fas fa-bookmark"></i>
        Saved Properties
        <span class="tab-badge">{{ favorites.length }}</span>
      </div>
      <div class="tab">
        <i class="fas fa-history"></i>
        Recently Viewed
      </div>
      <div class="tab">
        <i class="fas fa-bell"></i>
        Price Alerts
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-favorites" *ngIf="favorites.length === 0">
    <div class="empty-state-card">
      <div class="empty-icon">
        <i class="fas fa-heart-broken"></i>
      </div>
      <h3>Your favorites list is empty</h3>
      <p>Start exploring and add properties you love to your collection</p>
      <button class="btn-explore" routerLink="/properties">
        <i class="fas fa-search"></i>
        Explore Properties
      </button>
    </div>
  </div>

  <!-- Favorites Grid -->
  <div class="favorites-grid" *ngIf="favorites.length > 0">
    <div class="property-card" *ngFor="let fav of favorites" (click)="navigateToProperty(fav.property.id)">
      <!-- Property Image -->
      <div class="property-image">
        <img [src]="fav.property.imageUrl" alt="Property Image">
        <div class="image-overlay">
          <span class="property-type-badge">{{ fav.property.propertyType }}</span>
          <button class="favorite-toggle-btn" (click)="toggleFavorite(fav.propertyId); $event.stopPropagation()">
            <i class="fas fa-heart" [class.active]="isFavorite(fav.propertyId)"></i>
          </button>
        </div>
      </div>

      <!-- Property Details -->
      <div class="property-details">
        <div class="property-header">
          <h3 class="property-title">{{ fav.property.title }}</h3>
          <p class="property-location">
            <i class="fas fa-map-marker-alt"></i>
            {{ fav.property.location }}
          </p>
        </div>

        <div class="property-price">
          <span class="price-value">{{ fav.property.price | number }} EGP</span>
          <span class="price-period">/ month</span>
        </div>

        <!-- Property Features -->
        <div class="property-features">
          <div class="feature">
            <i class="fas fa-bed"></i>
            <span>{{ fav.property.rooms }} Bed</span>
          </div>
          <div class="feature">
            <i class="fas fa-bath"></i>
            <span>{{ fav.property.bathrooms }} Bath</span>
          </div>
          <div class="feature">
            <i class="fas fa-expand"></i>
            <span>{{ fav.property.area }} sqm</span>
          </div>
        </div>

        <!-- Property Footer -->
        <div class="property-footer">
          <div class="listed-date">
            <i class="far fa-clock"></i>
            Listed {{ fav.property.CreatedAt | date:'mediumDate' }}
          </div>
          
          <div class="property-actions">
            <button class="action-btn call-btn" (click)="callAgent($event)">
              <i class="fas fa-phone"></i>
              Call
            </button>
            <button class="action-btn email-btn" (click)="emailAgent($event)">
              <i class="far fa-envelope"></i>
              Email
            </button>
            <button class="action-btn whatsapp-btn" (click)="whatsappAgent($event)">
              <i class="fab fa-whatsapp"></i>
              WhatsApp
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination & Controls -->
  <div class="favorites-controls" *ngIf="favorites.length > 0">
    <!-- Pagination -->
    <div class="pagination-section">
      <button 
        class="pagination-btn prev-btn" 
        [disabled]="pageNumber === 1" 
        (click)="prevPage()"
      >
        <i class="fas fa-chevron-left"></i>
        Previous
      </button>
      
      <div class="page-info">
        <span class="current-page">Page {{ pageNumber }}</span>
      </div>
      
      <button 
        class="pagination-btn next-btn" 
        [disabled]="!hasNextPage" 
        (click)="nextPage()"
      >
        Next
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- Delete All Button -->
    <div class="delete-all-section">
      <button class="delete-all-btn" (click)="deleteAll()">
        <i class="fas fa-trash-alt"></i>
        Clear All Favorites
      </button>
    </div>
  </div>
</div>